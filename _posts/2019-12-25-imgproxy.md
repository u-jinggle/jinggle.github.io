---
published: true
layout: single
title: "imageproxy를 이용한 image resize"
category: post
comments: true
---

대부분의 서비스에서 이미지는 정말 중요한 정보입니다.  
같은 이미지라도 페이지에 따라 각각 다른 크기로 노출을 시켜 주고 있습니다.  
이미지 크기를 변경시키는 Image resize는 크게 
1. 원하는 이미지 크기만큼 저장을 시켜 사용하는 썸네일 저장
2. 원본의 이미지를 가지고 그때그때 resize해서 사용하는 On-demand Image Resizing 방식

으로 나눌 수 있습니다.  
그중에서 On-demand Image Resizing 방식에 해당하는 imageproxy를 적용하는 방법에 대해 알아보겠습니다.

imageproxy는 go로 작성되어 속도가 매우 빠르며, resize뿐만 아니라 기본적인 이미지 조정, 캐싱, 엑세스 제어등 다양한 옵션을 제공하고 있습니다.

다양한 설치 방법을 제시하고 있지만 저는 AWS에 ec2에 Docker를 통해 설치해 보도록 하겠습니다. 
 
## ec2 생성
ec2는 다른 부가 기능 없이 docker를 띄워 imageproxy 기능만 수행할 것이기 때문에 제일 기본적인 옵션으로 생성해 주도록 하겠습니다.  
> ### 단계 1: Amazon Machine Image(AMI) 선택
프리티어중 docker패키지가 포함되어 있는 Amazon Linux AMI를 선택합니다. 
![ec2생성 예시이미지1](/assets/images/2019-12-25_1.png){: width="100%"} 
 

다른 단계들은 default대로 진행해 줍니다.  
> ### 단계 6: 보안 그룹 구성
ssh 접속을 위한 22 포트와 http를 통해 이미지 리사이징을 확인해 보기위한 80 포트를 추가해 줍니다.  
![ec2보안그룹 예시이미지1](/assets/images/2019-12-25_2.png){: width="100%"} 

## docker 설치



